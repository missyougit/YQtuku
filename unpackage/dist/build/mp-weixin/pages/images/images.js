(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/images/images"],{"026c":function(t,e,n){"use strict";n.r(e);var o=n("7af8"),a=n("7e6f");for(var i in a)"default"!==i&&function(t){n.d(e,t,(function(){return a[t]}))}(i);n("2da5");var r,s=n("f0c5"),u=Object(s["a"])(a["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],r);e["default"]=u.exports},"2da5":function(t,e,n){"use strict";var o=n("f107"),a=n.n(o);a.a},"7af8":function(t,e,n){"use strict";var o;n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return i})),n.d(e,"a",(function(){return o}));var a=function(){var t=this,e=t.$createElement;t._self._c},i=[]},"7e6f":function(t,e,n){"use strict";n.r(e);var o=n("adb9"),a=n.n(o);for(var i in o)"default"!==i&&function(t){n.d(e,t,(function(){return o[t]}))}(i);e["default"]=a.a},adb9:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=void 0;function o(t){return s(t)||r(t)||i(t)||a()}function a(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function i(t,e){if(t){if("string"===typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,e):void 0}}function r(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}function s(t){if(Array.isArray(t))return u(t)}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=new Array(e);n<e;n++)o[n]=t[n];return o}var c={data:function(){var t=getApp().globalData.baseUrl;return{baseUrl:t,pageCount:1,total:0,pageNo:1,pageSize:5,images:[],openId:"",avatarUrl:"../../static/images/head_portrait.jpg",x:0,y:0,x1:0,x2:0,y1:0,y2:0,move:{x:0,y:0}}},props:{damping:{type:Number,default:10},direction:{type:String,default:"all"},position:{type:Number,default:4}},mounted:function(){var e=this;t.getSystemInfo({success:function(t){e.x1=0,e.x2=parseInt(t.windowWidth)-50,e.y1=0,e.y2=parseInt(t.windowHeight)-20,setTimeout((function(){1!=e.position&&2!=e.position||(e.y=parseInt(.2*e.y2)),3!=e.position&&4!=e.position||(e.y=parseInt(.8*e.y2)),1!=e.position&&3!=e.position||(e.x=parseInt(e.x1)),2!=e.position&&4!=e.position||(e.x=parseInt(e.x2)),e.move.x=e.x,e.move.y=e.y}),100)}})},onLoad:function(){this.openId=t.getStorageSync("openId");var e=this.baseUrl+"/image/list?pageNo="+this.pageNo+"&pageSize="+this.pageSize+"&openId="+this.openId;this.getImages(e)},onShareAppMessage:function(e){if("button"===e.from){var o=e.target.dataset.image;return{title:o.title,path:"./image_details",imageUrl:o.imagesList[0],success:function(e){console.log("pppppp");var a={openId:n.openId,imagesId:o.id,fenXiang:1};t.request({url:n.baseUrl+"/userAction/thumbsUp",method:"PUT",data:a})}}}if("menu"===e.from)return{title:"YQ图库-你值得拥有",path:"/pages/images/images"}},onShareTimeline:function(t){return{title:"YQ图库-你值得拥有",path:"/pages/images/images"}},onShow:function(){var e=this;if(""!=this.openId){var n=this.baseUrl+"/user/userInfo?openId="+this.openId;t.request({url:n,success:function(t){var n=t.data.result;e.avatarUrl=n.avatarUrl}})}},onPullDownRefresh:function(){if(this.toLogon()){this.pageNo=1;var e=this.baseUrl+"/image/list?pageNo="+this.pageNo+"&pageSize="+this.pageSize+"&openId="+this.openId;this.getImages(e),t.stopPullDownRefresh()}},onReachBottom:function(){if(this.toLogon()&&this.pageNo<=this.pageCount){var t=this.baseUrl+"/image/list?pageNo="+this.pageNo+"&pageSize="+this.pageSize+"&openId="+this.openId;this.getImages(t)}},methods:{dianzan:function(e){var n=1;e.myThumbsUp=!e.myThumbsUp,e.myThumbsUp?(e.userActionCount.thumbsUpCount++,n=1):(e.userActionCount.thumbsUpCount--,n=0);var o={openId:this.openId,imagesId:e.id,thumbsUp:n};t.request({url:this.baseUrl+"/userAction/thumbsUp",method:"PUT",data:o})},to_image_details:function(e){t.navigateTo({url:"./image_details",success:function(t){t.eventChannel.emit("acceptDataFromOpenerPage",e)}})},getImages:function(e){var n=this;t.request({url:e,success:function(e){var a=e.data,i=a.status,r=a.message,s=a.result;200==i?(n.pageCount=s.pageCount,n.total=s.total,1==n.pageNo?n.images=s.tukuList:n.images=[].concat(o(n.images),o(s.tukuList)),n.pageNo++):t.showToast({title:r,duration:1e3,icon:"none"})}})},previewImage:function(e,n){t.previewImage({current:e,urls:n})},toLogon:function(){return""!=this.openId||(t.navigateTo({url:"../logon/logon"}),!1)},toUserPage:function(){this.toLogon()&&t.navigateTo({url:"../user/user"})},onChange:function(t){"touch"===t.detail.source&&(this.move.x=t.detail.x,this.move.y=t.detail.y)},onTouchend:function(){var t=this;this.x=this.move.x,this.y=this.move.y,setTimeout((function(){t.move.x<t.x2/2?t.x=t.x1:t.x=t.x2,console.log(t.x,t.y)}),50)}}};e.default=c}).call(this,n("543d")["default"])},b42e:function(t,e,n){"use strict";(function(t){n("f8eb");o(n("66fd"));var e=o(n("026c"));function o(t){return t&&t.__esModule?t:{default:t}}wx.__webpack_require_UNI_MP_PLUGIN__=n,t(e.default)}).call(this,n("543d")["createPage"])},f107:function(t,e,n){}},[["b42e","common/runtime","common/vendor"]]]);